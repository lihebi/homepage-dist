<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Statistic Computing</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="/home/hebi/git/homepage/assets/org.css" /><link rel="stylesheet" type="text/css" href="/home/hebi/git/homepage/assets/hebi.css" /><link rel="stylesheet" type="text/css" href="/assets/org.css" /><link rel="stylesheet" type="text/css" href="/assets/hebi.css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2020 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href=""> UP </a>
 |
 <a accesskey="H" href="/"> HOME </a>
</div><div id="content">
<h1 class="title">Statistic Computing</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org30cba31">1. R lang</a>
<ul>
<li><a href="#orgd38c214">1.1. References</a></li>
<li><a href="#orgae3c112">1.2. Setting up</a>
<ul>
<li><a href="#org73a9802">1.2.1. Packages</a></li>
<li><a href="#orgf0318a0">1.2.2. Emacs ESS</a></li>
<li><a href="#orgafcecf7">1.2.3. Interactive command</a></li>
<li><a href="#org00face6">1.2.4. Commonly used functions</a></li>
</ul>
</li>
<li><a href="#orga7b7a8e">1.3. Scope</a></li>
<li><a href="#orgf5882eb">1.4. Types</a>
<ul>
<li><a href="#org28a8f81">1.4.1. primitives</a></li>
<li><a href="#org127b61d">1.4.2. Vector</a></li>
<li><a href="#orgfe3d55e">1.4.3. Indexing</a></li>
<li><a href="#org8063a41">1.4.4. cbind &amp; rbind</a></li>
<li><a href="#org4bde7ce">1.4.5. matrix</a></li>
<li><a href="#org683b0df">1.4.6. list</a></li>
<li><a href="#orge5b4654">1.4.7. Data frame</a></li>
<li><a href="#orga9823a2">1.4.8. type conversion</a></li>
<li><a href="#org7a2cdff">1.4.9. <span class="todo TODO">TODO</span> data loading</a></li>
<li><a href="#orgac11a4e">1.4.10. <span class="todo TODO">TODO</span> missing value</a></li>
<li><a href="#org193ea6b">1.4.11. <span class="todo TODO">TODO</span> set</a></li>
<li><a href="#org02d1f47">1.4.12. <span class="todo TODO">TODO</span> string</a></li>
<li><a href="#org542aed6">1.4.13. Evaluation rules (broadcast)</a></li>
</ul>
</li>
<li><a href="#orgbcd948b">1.5. Operators</a></li>
<li><a href="#org66640a5">1.6. Control Structure</a>
<ul>
<li><a href="#org9d5065f">1.6.1. Conditional</a></li>
<li><a href="#org42855bb">1.6.2. Loop</a></li>
</ul>
</li>
<li><a href="#org722a243">1.7. Function</a></li>
<li><a href="#org234eb6a">1.8. Quote (!!)</a></li>
<li><a href="#orgfdf71a8">1.9. Models</a>
<ul>
<li><a href="#org1520102">1.9.1. Linear model</a></li>
</ul>
</li>
<li><a href="#org69e79af">1.10. Plot</a>
<ul>
<li><a href="#orgeebc9d7">1.10.1. Decoration</a></li>
<li><a href="#org86e7a41">1.10.2. Plot Types</a>
<ul>
<li><a href="#org53ce17d">1.10.2.1. plot</a></li>
<li><a href="#org7ccf7a9">1.10.2.2. barplot</a></li>
<li><a href="#org69ec99c">1.10.2.3. pie</a></li>
<li><a href="#org3e06681">1.10.2.4. boxplot</a></li>
<li><a href="#org7162c83">1.10.2.5. hist</a></li>
<li><a href="#org2469f57">1.10.2.6. <span class="todo TODO">TODO</span> stem</a></li>
<li><a href="#org103e458">1.10.2.7. <span class="todo TODO">TODO</span> mosaicplot</a></li>
<li><a href="#org98c53d6">1.10.2.8. pairs</a></li>
</ul>
</li>
<li><a href="#org7da3f8b">1.10.3. Device Driver</a></li>
</ul>
</li>
<li><a href="#orgf94c14a">1.11. FFI</a></li>
<li><a href="#orgbea3cb5">1.12. Packages</a>
<ul>
<li><a href="#orgef81046">1.12.1. ggplot2</a></li>
<li><a href="#org47b1c62">1.12.2. plot(x, y, &#x2026;)</a></li>
<li><a href="#orgd5e0398">1.12.3. dplyr</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org198e3a2">2. Julia</a>
<ul>
<li><a href="#org7f2745b">2.1. Macros</a></li>
<li><a href="#org2cdc600">2.2. Julia Libraries</a>
<ul>
<li><a href="#org5dc398b">2.2.1. reference</a></li>
<li><a href="#org445380f">2.2.2. kmsquire/Match.jl</a></li>
<li><a href="#org551ce74">2.2.3. JuliaStats/RDatasets.jl</a></li>
<li><a href="#org82298e5">2.2.4. ML library</a>
<ul>
<li><a href="#org350de6e">2.2.4.1. cstjean/ScikitLearn.jl</a></li>
<li><a href="#org5834634">2.2.4.2. mpastell/LIBSVM.jl</a></li>
</ul>
</li>
<li><a href="#org5bb7824">2.2.5. Optimizers</a>
<ul>
<li><a href="#orgbd3407d">2.2.5.1. Optim.jl</a></li>
<li><a href="#org1d332f1">2.2.5.2. JuMP.jl</a></li>
</ul>
</li>
<li><a href="#org71348ca">2.2.6. Plots</a>
<ul>
<li><a href="#orgbaeb837">2.2.6.1. JuliaPlots/Plots.jl</a></li>
<li><a href="#orgaa8dea0">2.2.6.2. JuliaPlots/StatsPlots.jl</a></li>
<li><a href="#org65cea00">2.2.6.3. JuliaPlots/RecipesBase.jl</a></li>
</ul>
</li>
<li><a href="#orge8a5a4c">2.2.7. Datasets</a>
<ul>
<li><a href="#orgadacc4d">2.2.7.1. METADATA.jl</a></li>
<li><a href="#org8446e3e">2.2.7.2. Metalhead.jl</a></li>
<li><a href="#org7a8dd3a">2.2.7.3. DataFrames.jl</a></li>
</ul>
</li>
<li><a href="#org38cca3e">2.2.8. Graph</a>
<ul>
<li><a href="#orga72a182">2.2.8.1. LightGraphs.jl</a></li>
<li><a href="#org75834b9">2.2.8.2. MetaGraphs.jl</a></li>
<li><a href="#org86a2227">2.2.8.3. Compose.jl</a></li>
<li><a href="#org95c2e23">2.2.8.4. GraphLayout.jl</a></li>
</ul>
</li>
<li><a href="#orgd0fb6fc">2.2.9. Images</a>
<ul>
<li><a href="#org3292eea">2.2.9.1. ColorTypes.jl</a></li>
<li><a href="#org738d52e">2.2.9.2. ImageFiltering.jl</a></li>
<li><a href="#org7db2267">2.2.9.3. Images.jl</a></li>
</ul>
</li>
<li><a href="#org902b3c8">2.2.10. Compiler tools</a>
<ul>
<li><a href="#org6dae93f">2.2.10.1. MacroTools.jl</a></li>
<li><a href="#orgfee447c">2.2.10.2. PackageCompiler.jl</a></li>
</ul>
</li>
<li><a href="#org65717d5">2.2.11. Probablistic packages</a>
<ul>
<li><a href="#orgbfebdd0">2.2.11.1. Distributions.jl</a></li>
<li><a href="#orgd0568bd">2.2.11.2. GLM.jl (!!!)</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org5e18f5a">2.3. Using Pkg</a></li>
<li><a href="#org1e8a2eb">2.4. Useful functions</a></li>
</ul>
</li>
<li><a href="#orgb318dd6">3. Back</a>
<ul>
<li>
<ul>
<li><a href="#org7db520f">3.0.1. data example</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org30cba31" class="outline-2">
<h2 id="org30cba31"><span class="section-number-2">1</span> R lang</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-orgd38c214" class="outline-3">
<h3 id="orgd38c214"><span class="section-number-3">1.1</span> References</h3>
<div class="outline-text-3" id="text-1-1">
<ul class="org-ul">
<li><a href="https://cran.r-project.org/doc/manuals/r-release/R-intro.html">official introduction tutorial</a></li>
<li><a href="https://cran.r-project.org/doc/manuals/r-release/R-lang.html">the language reference</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgae3c112" class="outline-3">
<h3 id="orgae3c112"><span class="section-number-3">1.2</span> Setting up</h3>
<div class="outline-text-3" id="text-1-2">
</div>
<div id="outline-container-org73a9802" class="outline-4">
<h4 id="org73a9802"><span class="section-number-4">1.2.1</span> Packages</h4>
<div class="outline-text-4" id="text-1-2-1">
<ul class="org-ul">
<li><code>library()</code> see the list of installed packages.</li>
<li><code>library(class)</code> load the package <code>class</code>.</li>
<li><code>search()</code> see the list of loaded packages.</li>
<li><code>install.packages()</code> and <code>update.packages()</code> install and update packages.</li>
</ul>
</div>
</div>

<div id="outline-container-orgf0318a0" class="outline-4">
<h4 id="orgf0318a0"><span class="section-number-4">1.2.2</span> Emacs ESS</h4>
<div class="outline-text-4" id="text-1-2-2">
<p>
To start ESS session, run command <code>S</code>.
ESS will create a command interface as a buffer.
Execute <code>?foo</code> will open the <code>R-doc</code> for the function <code>foo</code>.
</p>

<p>
There's a babel in org mode for R, so just <code>C-c C-c</code> would work.
This will prompt to create a session.
One special for this babel is you can evaluate by line, using <code>C-&lt;RET&gt;</code> in the edit buffer.
</p>

<p>
Keep the session using the header:
</p>
<pre class="example">
#+PROPERTY: session *R*
</pre>

<p>
To export a graph:
</p>

<pre class="example">
:file image.png :results output graphics :exports both
</pre>

<p>
To export ordinary result:
</p>

<pre class="example">
:exports both
</pre>

<p>
To export some summary data:
</p>

<pre class="example">
:exports both :results output org
</pre>
</div>
</div>

<div id="outline-container-orgafcecf7" class="outline-4">
<h4 id="orgafcecf7"><span class="section-number-4">1.2.3</span> Interactive command</h4>
<div class="outline-text-4" id="text-1-2-3">
<p>
We need to know what's going on in the current workspace.  <code>getwd()</code>
and <code>setwd()</code> get and set the current dir.  <code>ls()</code> list the objects
currently stored.  <code>rm(x, y, z)</code> remove objects <code>rm(list=ls())</code> remove
all objects. <code>objects()</code> create and store current objects.
</p>

<p>
We can perform some IO by <code>save.image("mydata.Rdata")</code> and
<code>load("mydata.Rdata")</code> will save and load workspace in current
directory respectively.  <code>source("a.R")</code> loads a script.
<code>sink("a.lis")</code> redirects the output to a file, and <code>sink()</code> restore
that to standard output.
</p>

<p>
You can view documentation by calling help <code>help(lm)</code>. <code>?lm</code> and
<code>??solve</code> also shows documentation, while <code>example(topic)</code>, as its
name indicates, shows the examples.  <code>help.start()</code> opens the html
documentation page.
</p>

<p>
Finally, <code>q()</code> quit R.
</p>

<p>
The <code>print</code> function can output the value of a variable.
</p>

<div class="org-src-container">
<pre class="src src-R">print(<span class="org-string">"hello"</span>)
cat(<span class="org-string">"world"</span>, <span class="org-string">"!"</span>, <span class="org-string">"\n"</span>)
print(c(1,2,3))
</pre>
</div>



<p>
To enter the debugger, a call to <code>browser</code> function suffices.  This allows you
to browse the values at that point.  A more powerful debugger is by a call to
<code>debug</code> with the function name as argument.  Each time that function is called,
you enter the debug and can control the execution.  Tracing can be registered by
<code>trace</code> or <code>untrace</code> with the name of the function.  It might need to be quoted
in some case, so you'd better quote it, with double quotes.  Every time the
function is invoked, the return value will be printed as trace.
</p>
</div>
</div>

<div id="outline-container-org00face6" class="outline-4">
<h4 id="org00face6"><span class="section-number-4">1.2.4</span> Commonly used functions</h4>
<div class="outline-text-4" id="text-1-2-4">
<ul class="org-ul">
<li><code>str</code> show the structure of arbitrary type</li>
<li><code>summary</code> print the summary</li>
</ul>
<p>
To see the data, you can use:
</p>
<ul class="org-ul">
<li>dim()</li>
<li>length()</li>
<li>head()</li>
<li>tail()</li>
<li><code>summary(dataset)</code> shows some information like max,min,mean</li>
<li><code>class(data$col)</code> get type</li>
<li><code>levels(data$col)</code> if it is factor, get the values</li>
<li><code>stopifnot()</code>: the assert</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orga7b7a8e" class="outline-3">
<h3 id="orga7b7a8e"><span class="section-number-3">1.3</span> Scope</h3>
<div class="outline-text-3" id="text-1-3">
<p>
The scope is pretty weired, it is lexical scoping, but assign to the variable
has no effect. You have to use <code>&lt;&lt;-</code> to assign.
</p>


<div class="org-src-container">
<pre class="src src-R"><span class="org-function-name">f</span> <span class="org-ess-assignment">&lt;-</span> <span class="org-ess-keyword">function</span>() {
  var <span class="org-ess-assignment">&lt;-</span> 0
  list(
    print = <span class="org-ess-keyword">function</span>() {
      print(var)
    },
    add1 = <span class="org-ess-keyword">function</span>() {
      var <span class="org-ess-assignment">&lt;-</span> var + 1
    },
    sub1 = <span class="org-ess-keyword">function</span>() {
      var <span class="org-ess-assignment">&lt;&lt;-</span> var - 1
    })}
l <span class="org-ess-assignment">&lt;-</span> f()
l$print()
l$add1()
l$print()
l$sub1()
l$print()
</pre>
</div>

<p>
The function parameter is always local, changing it have no effect outside:
</p>

<div class="org-src-container">
<pre class="src src-R"><span class="org-function-name">f</span> <span class="org-ess-assignment">&lt;-</span> <span class="org-ess-keyword">function</span> (var) {
  var[1] <span class="org-ess-assignment">&lt;-</span> 8
}
x <span class="org-ess-assignment">&lt;-</span> c(1,2,3)
f(x)
x
</pre>
</div>

<p>
It is call by value, for all objects. You can NOT even change a global variable,
even using <code>&lt;&lt;-</code>:
</p>

<div class="org-src-container">
<pre class="src src-R">x <span class="org-ess-assignment">&lt;-</span> 1
<span class="org-function-name">f</span> <span class="org-ess-assignment">&lt;-</span> <span class="org-ess-keyword">function</span>() {
  x <span class="org-ess-assignment">&lt;&lt;-</span> 2
}
x
</pre>
</div>
</div>
</div>




<div id="outline-container-orgf5882eb" class="outline-3">
<h3 id="orgf5882eb"><span class="section-number-3">1.4</span> Types</h3>
<div class="outline-text-3" id="text-1-4">
</div>
<div id="outline-container-org28a8f81" class="outline-4">
<h4 id="org28a8f81"><span class="section-number-4">1.4.1</span> primitives</h4>
<div class="outline-text-4" id="text-1-4-1">
<p>
Looks like all numbers are double by default:
</p>

<div class="org-src-container">
<pre class="src src-R">typeof(1)
typeof(1L)
</pre>
</div>
</div>
</div>

<div id="outline-container-org127b61d" class="outline-4">
<h4 id="org127b61d"><span class="section-number-4">1.4.2</span> Vector</h4>
<div class="outline-text-4" id="text-1-4-2">
<p>
Create a vector by <code>c()</code>, which is append:
</p>

<div class="org-src-container">
<pre class="src src-R">c(1,2,3)
x <span class="org-ess-assignment">&lt;-</span> c(1,2,3)
c(x, 0, x)
</pre>
</div>

<p>
Vectors are the array of objects of the same mode (type).
</p>

<div class="org-src-container">
<pre class="src src-R">c(1, <span class="org-string">"hello"</span>)
</pre>
</div>



<p>
To create a sequence:
</p>
<div class="org-src-container">
<pre class="src src-R">1:10
10:1
</pre>
</div>


<p>
Colon operator has higher priority:
</p>

<div class="org-src-container">
<pre class="src src-R">2*1:10
</pre>
</div>

<p>
The more powerful sequence function is <code>seq</code>:
</p>

<div class="org-src-container">
<pre class="src src-R">seq(1,10)
seq(-1, 1, by=.2)
seq(length=10, from=-5, by=.2)
</pre>
</div>

<p>
Repeating something:
</p>

<div class="org-src-container">
<pre class="src src-R">x <span class="org-ess-assignment">&lt;-</span> c(1,2,3)
rep(x, times=3)
rep(x, each=3)
</pre>
</div>


<p>
The length, mode, typeof
</p>
<div class="org-src-container">
<pre class="src src-R">x <span class="org-ess-assignment">&lt;-</span> c(1,2,3)
length(x)
mode(x)
typeof(x)
</pre>
</div>
</div>
</div>


<div id="outline-container-orgfe3d55e" class="outline-4">
<h4 id="orgfe3d55e"><span class="section-number-4">1.4.3</span> Indexing</h4>
<div class="outline-text-4" id="text-1-4-3">
<p>
Vectors can be indexed by integers, starting from 1.
</p>

<div class="org-src-container">
<pre class="src src-R">x <span class="org-ess-assignment">&lt;-</span> c(1,2,3,4)
x[2]
</pre>
</div>

<p>
It can also be indexed by vector of integers
</p>

<div class="org-src-container">
<pre class="src src-R">x <span class="org-ess-assignment">&lt;-</span> c(1,2,3,4)
x[c(1,3)]
</pre>
</div>

<p>
Negative index selects the elements other than those index. The index 0 will
return empty (HEBI: ??).
</p>

<div class="org-src-container">
<pre class="src src-R">x <span class="org-ess-assignment">&lt;-</span> c(1,2,3,4)
x[0]
x[-1]
x[c(-1, -3)]
</pre>
</div>

<p>
Indexing by logical vector
</p>

<div class="org-src-container">
<pre class="src src-R">x <span class="org-ess-assignment">&lt;-</span> c(1,2,3,4)
x[c(<span class="org-ess-constant">TRUE</span>, <span class="org-ess-constant">FALSE</span>, <span class="org-ess-constant">TRUE</span>, <span class="org-ess-constant">FALSE</span>)]
</pre>
</div>

<p>
Or by its name, where the string is compared <b>partially</b> (HEBI: ??)
</p>

<div class="org-src-container">
<pre class="src src-R">x <span class="org-ess-assignment">&lt;-</span> c(1,2,3)
names(x) <span class="org-ess-assignment">&lt;-</span> c(<span class="org-string">"hello"</span>, <span class="org-string">"world"</span>, <span class="org-string">"lala"</span>)
x
x[<span class="org-string">"hel"</span>]
x[<span class="org-string">"hello"</span>]
x[c(<span class="org-string">"hello"</span>, <span class="org-string">"world"</span>)]
</pre>
</div>
</div>
</div>

<div id="outline-container-org8063a41" class="outline-4">
<h4 id="org8063a41"><span class="section-number-4">1.4.4</span> cbind &amp; rbind</h4>
<div class="outline-text-4" id="text-1-4-4">
<p>
This is to <b>combine</b> (for matrix, similar to append for vector) arguments in
row-wise or column-wise, and creates matrix. This will apply broadcast.
</p>

<div class="org-src-container">
<pre class="src src-R">cbind(0, rbind(1, 1:3))
</pre>
</div>
</div>
</div>



<div id="outline-container-org4bde7ce" class="outline-4">
<h4 id="org4bde7ce"><span class="section-number-4">1.4.5</span> matrix</h4>
<div class="outline-text-4" id="text-1-4-5">
<p>
Matrix can be created by the <code>matrix</code> function.
</p>

<div class="org-src-container">
<pre class="src src-R">x <span class="org-ess-assignment">&lt;-</span> matrix(1:8, nrow=2)
x
dim(x)
</pre>
</div>

<p>
Specify dimnames:
</p>

<div class="org-src-container">
<pre class="src src-R">matrix(1:6, nrow = 2, dimnames = list(c(<span class="org-string">"a"</span>, <span class="org-string">"b"</span>), LETTERS[1:3]))
</pre>
</div>

<p>
When indexing, the drop argument (defaulting to TRUE), if TRUE, the result is
coerced to the lowest possible dimension:
</p>

<div class="org-src-container">
<pre class="src src-R">m <span class="org-ess-assignment">&lt;-</span> matrix(1:6, nrow = 2, dimnames = list(c(<span class="org-string">"a"</span>, <span class="org-string">"b"</span>), LETTERS[1:3]))
m[1,]
m[1, , drop = <span class="org-ess-constant">FALSE</span>]
</pre>
</div>
</div>
</div>



<div id="outline-container-org683b0df" class="outline-4">
<h4 id="org683b0df"><span class="section-number-4">1.4.6</span> list</h4>
<div class="outline-text-4" id="text-1-4-6">
<p>
list is a misnomer, it is a dict
</p>

<div class="org-src-container">
<pre class="src src-R">l <span class="org-ess-assignment">&lt;-</span> list(hello=1, <span class="org-string">"world"</span>=2)
l
l$hello
l$world
</pre>
</div>


<p>
When indexing lists, <code>[]</code> retains names, while <code>[[]]</code> returns only the element:
</p>

<div class="org-src-container">
<pre class="src src-R">c(abc = 123)[1]
</pre>
</div>


<div class="org-src-container">
<pre class="src src-R">c(abc = 123)[[1]]
</pre>
</div>
</div>
</div>



<div id="outline-container-orge5b4654" class="outline-4">
<h4 id="orge5b4654"><span class="section-number-4">1.4.7</span> Data frame</h4>
<div class="outline-text-4" id="text-1-4-7">
<dl class="org-dl">
<dt><code>na.omit</code></dt><dd>can omit the NA values in data frame</dd>
</dl>

<p>
A data frame is a list of equal-length vectors.
When getting the data from read.csv, the result is a data frame.
Use <code>names</code> to work on data frames will emit the names.
</p>
<ul class="org-ul">
<li>Since it is a list, using <code>[]</code> to index will give also the list, a.k.a. data frame, retaining names.
You can use a vector as index.</li>
<li>Using <code>[[]]</code> to index will give the value, dropping names.
You cannot use a vector as index.</li>
</ul>
</div>
</div>

<div id="outline-container-orga9823a2" class="outline-4">
<h4 id="orga9823a2"><span class="section-number-4">1.4.8</span> type conversion</h4>
<div class="outline-text-4" id="text-1-4-8">
<p>
you can change a type of a vector by
</p>
<ul class="org-ul">
<li><code>as.factor(x)</code></li>
<li>as.numeric()</li>
</ul>
</div>
</div>



<div id="outline-container-org7a2cdff" class="outline-4">
<h4 id="org7a2cdff"><span class="section-number-4">1.4.9</span> <span class="todo TODO">TODO</span> data loading</h4>
<div class="outline-text-4" id="text-1-4-9">
<ul class="org-ul">
<li><code>read.csv</code></li>
<li><code>write</code></li>
<li><code>write.table</code></li>
<li><code>write.csv</code></li>
<li><code>read.table("filename", header=TRUE, sep=",")</code>
<ul class="org-ul">
<li>this ignores blank lines,</li>
<li>and expect the header to be one field less than the body.</li>
<li><code>#</code> as comments</li>
</ul></li>
<li>read.delim</li>
<li><code>cat</code> outputs the data, no index, no newline</li>
</ul>


<ul class="org-ul">
<li><code>attach(data)</code>: make the columns into this namespace</li>
<li><code>detach(data)</code>: remove those</li>
</ul>
</div>
</div>



<div id="outline-container-orgac11a4e" class="outline-4">
<h4 id="orgac11a4e"><span class="section-number-4">1.4.10</span> <span class="todo TODO">TODO</span> missing value</h4>
<div class="outline-text-4" id="text-1-4-10">
<p>
The missing values are <code>NA</code>, tested by <code>is.na</code>.  Illegal computations produces
<code>NaN</code>, e.g. <code>0/0</code>.
</p>
</div>
</div>

<div id="outline-container-org193ea6b" class="outline-4">
<h4 id="org193ea6b"><span class="section-number-4">1.4.11</span> <span class="todo TODO">TODO</span> set</h4>
<div class="outline-text-4" id="text-1-4-11">
<p>
subset
</p>
</div>
</div>

<div id="outline-container-org02d1f47" class="outline-4">
<h4 id="org02d1f47"><span class="section-number-4">1.4.12</span> <span class="todo TODO">TODO</span> string</h4>
<div class="outline-text-4" id="text-1-4-12">
<p>
substr
</p>
</div>
</div>


<div id="outline-container-org542aed6" class="outline-4">
<h4 id="org542aed6"><span class="section-number-4">1.4.13</span> Evaluation rules (broadcast)</h4>
<div class="outline-text-4" id="text-1-4-13">
<ul class="org-ul">
<li>recycling rules: the shortest list is recycled to the length of longest.</li>
<li>dimensional attributes: the dimension of matrix must match. No recycle for a matrix.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgbcd948b" class="outline-3">
<h3 id="orgbcd948b"><span class="section-number-3">1.5</span> Operators</h3>
<div class="outline-text-3" id="text-1-5">
<ul class="org-ul">
<li>arithmetic: <code>+-*/</code>, <code>^</code> for exp, <code>%%</code> for modulus</li>
<li>matrix: <code>%*%</code> matrix product, <code>%o%</code> outer product</li>
<li>logic: <code>!</code>, <code>&amp;, |</code> for vector, <code>&amp;&amp;, ||</code> for no vector</li>
<li>relative: <code>&gt;, &lt;, ==, &lt;=, &gt;=</code></li>
<li>general: <code>&lt;-, -&gt;</code> assignments, <code>$</code> list subset, <code>:</code> sequence, <code>~</code> for model formula</li>
</ul>

<p>
Built-in functions:
</p>
<ul class="org-ul">
<li><code>log</code>, <code>exp</code>, <code>sin</code>, <code>cos</code>, <code>tan</code>, <code>sqrt</code></li>
<li><code>min</code>, <code>max</code></li>
<li><code>range</code>: same as <code>c(min(x),max(x))</code></li>
<li><code>length(x)</code>, <code>sum(x)</code>, <code>prod(x)</code> (product)</li>
<li><code>mean(x)</code>: <code>sum(x)/length(x)</code></li>
<li><code>var(x)</code>: <code>sum((x-mean(x))^2)/(length(x)-1)</code></li>
<li><code>sort(x)</code>: increasing order</li>
<li><code>order()</code> or <code>sort.list()</code></li>
<li><code>paste(sep</code>" ")= function takes an arbitrary number of arguments and
concatenates them one by one into character strings. The argument can be
numeric.</li>
<li><code>toString(8)</code>: convert integer to string</li>
<li><code>round(x, digits=0)</code></li>
</ul>
</div>
</div>

<div id="outline-container-org66640a5" class="outline-3">
<h3 id="org66640a5"><span class="section-number-3">1.6</span> Control Structure</h3>
<div class="outline-text-3" id="text-1-6">
<p>
The compound statements are the same as C, can be a single statement without the braces.
</p>
</div>

<div id="outline-container-org9d5065f" class="outline-4">
<h4 id="org9d5065f"><span class="section-number-4">1.6.1</span> Conditional</h4>
<div class="outline-text-4" id="text-1-6-1">
<ul class="org-ul">
<li>if: <code>if (STMT) STMT else if (STMT) STMT else STMT</code></li>
</ul>

<p>
The switch is quite interesting. It is
</p>

<div class="org-src-container">
<pre class="src src-R"><span class="org-ess-keyword">switch</span>(x, list...)
</pre>
</div>

<p>
The semantic is to find x in the list and return the value. If x is not in list,
return NULL.
</p>

<p>
An unnamed list has implicit index as name:
</p>

<div class="org-src-container">
<pre class="src src-R"><span class="org-ess-keyword">switch</span>(2,1,2,3)
</pre>
</div>

<p>
Using name:
</p>

<div class="org-src-container">
<pre class="src src-R"><span class="org-ess-keyword">switch</span>(<span class="org-string">"hello"</span>, hello=1, world=2)
</pre>
</div>

<p>
not found, return NULL:
</p>

<div class="org-src-container">
<pre class="src src-R">is.null(<span class="org-ess-keyword">switch</span>(<span class="org-string">"nothing"</span>, hello=1))
</pre>
</div>

<p>
Interestingly, even for named list, we can still use the index:
</p>

<div class="org-src-container">
<pre class="src src-R"><span class="org-ess-keyword">switch</span>(2, hello=1, world=2)
</pre>
</div>
</div>
</div>


<div id="outline-container-org42855bb" class="outline-4">
<h4 id="org42855bb"><span class="section-number-4">1.6.2</span> Loop</h4>
<div class="outline-text-4" id="text-1-6-2">
<ul class="org-ul">
<li>for loop: <code>for (NAME in VECTOR) STMT</code></li>
<li>while loop: <code>while (STMT) STMT</code></li>
<li>repeat: <code>repeat STMT</code></li>
<li><code>break</code>, <code>next</code></li>
</ul>


<div class="org-src-container">
<pre class="src src-R">ret <span class="org-ess-assignment">&lt;-</span> c()
<span class="org-ess-keyword">for</span> (i <span class="org-ess-keyword">in</span> 1:5) {
  ret <span class="org-ess-assignment">&lt;-</span> c(ret, i)
}
ret
</pre>
</div>
</div>
</div>
</div>


<div id="outline-container-org722a243" class="outline-3">
<h3 id="org722a243"><span class="section-number-3">1.7</span> Function</h3>
<div class="outline-text-3" id="text-1-7">
<p>
<code>function (ARGLIST) BODY</code>
</p>

<p>
The argument list can be a symbol, a <code>symbol=value</code>, or a <code>...</code>.
The body is a compound expression, surrounded with <code>{}</code>.
Function can be assigned to a symbol.
</p>

<p>
The matching of formals and actual are pretty tricky.
</p>
<ol class="org-ol">
<li>exact matching on tags</li>
<li>partial matching on tags</li>
<li>positional matching for <code>...</code> Partial matching result must be unique, but the
exact matched ones are excluded before this step is entered.</li>
</ol>

<div class="org-src-container">
<pre class="src src-R"><span class="org-function-name">f</span> <span class="org-ess-assignment">&lt;-</span> <span class="org-ess-keyword">function</span>(a, b, c) {
  <span class="org-ess-keyword">return</span>(c(a, b+c))
}
f(1,2,3)
</pre>
</div>
</div>
</div>


<div id="outline-container-org234eb6a" class="outline-3">
<h3 id="org234eb6a"><span class="section-number-3">1.8</span> Quote (!!)</h3>
<div class="outline-text-3" id="text-1-8">
<p>
The quote will wrap the expression into an object without evaluating it.  The
resulting object has the mode of <code>call</code>.  The <code>eval</code> is used to evaluate it.
</p>

<ul class="org-ul">
<li><code>quote</code></li>
<li><code>substitute</code></li>
<li><code>eval</code></li>
<li><code>call</code></li>
</ul>
</div>
</div>


<div id="outline-container-orgfdf71a8" class="outline-3">
<h3 id="orgfdf71a8"><span class="section-number-3">1.9</span> Models</h3>
<div class="outline-text-3" id="text-1-9">
</div>
<div id="outline-container-org1520102" class="outline-4">
<h4 id="org1520102"><span class="section-number-4">1.9.1</span> Linear model</h4>
<div class="outline-text-4" id="text-1-9-1">
<p>
A linear model is created <b>and fitted</b> by <code>lm()</code> function, with the model
formula and data frame. For example:
</p>

<div class="org-src-container">
<pre class="src src-R">df = data.frame(x=c(1,2,3), y=c(2,4,6))
fm = lm(y ~ x, data=df)
summary(fm)
</pre>
</div>

<p>
The fitted model in the variable <code>fm</code> can be accessed by:
</p>
<ul class="org-ul">
<li><code>coef</code>: extract the coefficients</li>
<li><code>deviance</code>: the Residual Sum of Square</li>
<li><code>formula</code>: extract the model formula</li>
<li><code>plot</code>: produce four plots: residuals, fitted values, diagnostics.</li>
<li><code>predict(OBJECT, newdata=DATA.FRAME)</code>: use the model to predict</li>
<li><code>residuals</code>: extract the residuals</li>
<li><code>summary()</code></li>
</ul>

<p>
The models can be updated, if the formula only changes a little bit.  In the
following example, the <code>.</code> means the corresponding part of the original formula.
</p>

<div class="org-src-container">
<pre class="src src-R">fs <span class="org-ess-assignment">&lt;-</span> lm(y ~ x1 + x2, data=mydf)
fs <span class="org-ess-assignment">&lt;-</span> update(fs, . ~ . + x3)
fs <span class="org-ess-assignment">&lt;-</span> update(fs, sqrt(.) ~ .)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org69e79af" class="outline-3">
<h3 id="org69e79af"><span class="section-number-3">1.10</span> Plot</h3>
<div class="outline-text-3" id="text-1-10">
<p>
Process data:
</p>
<ul class="org-ul">
<li>table</li>
<li>cut(data, breaks=c(1,3,8))</li>
</ul>
</div>

<div id="outline-container-orgeebc9d7" class="outline-4">
<h4 id="orgeebc9d7"><span class="section-number-4">1.10.1</span> Decoration</h4>
<div class="outline-text-4" id="text-1-10-1">
<ul class="org-ul">
<li>box</li>
<li>axis</li>
<li>las attribute</li>
<li>legend</li>
<li>par</li>
<li>text</li>
<li>mtext</li>
<li>points</li>
</ul>
</div>
</div>
<div id="outline-container-org86e7a41" class="outline-4">
<h4 id="org86e7a41"><span class="section-number-4">1.10.2</span> Plot Types</h4>
<div class="outline-text-4" id="text-1-10-2">
</div>
<div id="outline-container-org53ce17d" class="outline-5">
<h5 id="org53ce17d"><span class="section-number-5">1.10.2.1</span> plot</h5>
<div class="outline-text-5" id="text-1-10-2-1">
<ul class="org-ul">
<li>lines</li>
<li>abline</li>
</ul>
</div>
</div>
<div id="outline-container-org7ccf7a9" class="outline-5">
<h5 id="org7ccf7a9"><span class="section-number-5">1.10.2.2</span> barplot</h5>
</div>
<div id="outline-container-org69ec99c" class="outline-5">
<h5 id="org69ec99c"><span class="section-number-5">1.10.2.3</span> pie</h5>
</div>
<div id="outline-container-org3e06681" class="outline-5">
<h5 id="org3e06681"><span class="section-number-5">1.10.2.4</span> boxplot</h5>
<div class="outline-text-5" id="text-1-10-2-4">
<ul class="org-ul">
<li>quantile</li>
</ul>
</div>
</div>
<div id="outline-container-org7162c83" class="outline-5">
<h5 id="org7162c83"><span class="section-number-5">1.10.2.5</span> hist</h5>
<div class="outline-text-5" id="text-1-10-2-5">
<ul class="org-ul">
<li>lines(density(data))</li>
</ul>
</div>
</div>
<div id="outline-container-org2469f57" class="outline-5">
<h5 id="org2469f57"><span class="section-number-5">1.10.2.6</span> <span class="todo TODO">TODO</span> stem</h5>
</div>
<div id="outline-container-org103e458" class="outline-5">
<h5 id="org103e458"><span class="section-number-5">1.10.2.7</span> <span class="todo TODO">TODO</span> mosaicplot</h5>
</div>
<div id="outline-container-org98c53d6" class="outline-5">
<h5 id="org98c53d6"><span class="section-number-5">1.10.2.8</span> pairs</h5>
</div>
</div>
<div id="outline-container-org7da3f8b" class="outline-4">
<h4 id="org7da3f8b"><span class="section-number-4">1.10.3</span> Device Driver</h4>
<div class="outline-text-4" id="text-1-10-3">
<p>
When outputting some image, you have to tell R which format you want
to use. The default on linux is X11, that's why it opens a image
immediately after plotting. To use a device, call the device function,
and after that all graphics output will be sent to that device.
</p>
<ul class="org-ul">
<li>X11</li>
<li>pdf</li>
<li>png</li>
<li><p>
jpeg
</p>

<p>
When you have finished with a device, terminate it by <code>dev.off()</code>.
</p>

<p>
To output to a file TODO to open plot in emacs:
</p>
<div class="org-src-container">
<pre class="src src-R">  pdf(<span class="org-string">"test1.pdf"</span>)
  dev.control(displaylist = <span class="org-string">"enable"</span>)
  plot(1:10)
  dev.copy(pdf, <span class="org-string">"test2.pdf"</span>)
  dev.off()
  <span class="org-comment-delimiter"># </span><span class="org-comment">should now have a valid test2.pdf</span>
  dev.off() <span class="org-comment-delimiter"># </span><span class="org-comment">finished</span>
</pre>
</div></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgf94c14a" class="outline-3">
<h3 id="orgf94c14a"><span class="section-number-3">1.11</span> FFI</h3>
<div class="outline-text-3" id="text-1-11">
<p>
To call a C function in R, first load the C shared library:
</p>

<div class="org-src-container">
<pre class="src src-R">dyn.load()
dyn.unload()
</pre>
</div>

<p>
Then, you can directly call a C function:
</p>

<div class="org-src-container">
<pre class="src src-R">.C(<span class="org-string">"foo"</span>, as.double(a), as.integer(b))
</pre>
</div>

<p>
Or, if you need to pass a R object to the C function, you use
</p>

<div class="org-src-container">
<pre class="src src-R">.Call(<span class="org-string">"foo"</span>, a, b)
.External(<span class="org-string">"foo"</span>, a, b)
</pre>
</div>

<p>
R also provides a command to create shared object, instead of using raw gcc:
</p>

<pre class="example">
R CMD SHLIB foo.c
</pre>
</div>
</div>


<div id="outline-container-orgbea3cb5" class="outline-3">
<h3 id="orgbea3cb5"><span class="section-number-3">1.12</span> Packages</h3>
<div class="outline-text-3" id="text-1-12">
</div>
<div id="outline-container-orgef81046" class="outline-4">
<h4 id="orgef81046"><span class="section-number-4">1.12.1</span> ggplot2</h4>
<div class="outline-text-4" id="text-1-12-1">
<div class="org-src-container">
<pre class="src src-R">qplot(totbill, tip, geom=<span class="org-string">"point"</span>, data=tips) <span class="org-comment-delimiter"># </span><span class="org-comment">scatter plot</span>
qplot(totbill, tip, geom=<span class="org-string">"point"</span>, data=tips) + geom_smooth(method=<span class="org-string">"lm"</span>) <span class="org-comment-delimiter"># </span><span class="org-comment">with linear relationship line</span>
qplot(tip, geom=<span class="org-string">"histogram"</span>, data=tip) <span class="org-comment-delimiter"># </span><span class="org-comment">histogram</span>
qplot(tip, geom=<span class="org-string">"histogram"</span>, binwidth=1, data=tips) <span class="org-comment-delimiter"># </span><span class="org-comment">with custom binwidth</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">box plots</span>
qplot(sex, tipperc, geom=<span class="org-string">"boxplot"</span>, data=tips)
qplot(smoker, tipperc, geom=<span class="org-string">"boxplot"</span>, data=tips)
qplot(sex:smoker, tipperc, geom=<span class="org-string">"boxplot"</span>, data=tips) <span class="org-comment-delimiter"># </span><span class="org-comment">combine! plot the two sets of graph in two one graph</span>
qplot(totbill, tip, geom=<span class="org-string">"point"</span>, colour=day, data=tips) <span class="org-comment-delimiter"># </span><span class="org-comment">scatter plot with colors, in regard to "day" column</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org47b1c62" class="outline-4">
<h4 id="org47b1c62"><span class="section-number-4">1.12.2</span> plot(x, y, &#x2026;)</h4>
<div class="outline-text-4" id="text-1-12-2">
<p>
Possible <code>...</code> arguments:
</p>
<ul class="org-ul">
<li><code>type</code> what type of plot:
<ul class="org-ul">
<li><code>p</code> for points,</li>
<li><code>l</code> for lines,</li>
<li><code>b</code> for both,</li>
<li><code>h</code> for <code>histogram</code> like (or <code>high-density</code>) vertical lines,</li>
</ul></li>
<li><code>main</code> an overall title for the plot: see <code>title</code>.</li>
<li><code>xlab</code> a title for the x axis: see <code>title</code>.</li>
<li><code>ylab</code> a title for the y axis: see <code>title</code>.</li>
</ul>
</div>
</div>

<div id="outline-container-orgd5e0398" class="outline-4">
<h4 id="orgd5e0398"><span class="section-number-4">1.12.3</span> dplyr</h4>
<div class="outline-text-4" id="text-1-12-3">
<p>
A Grammar of Data Manipulation
</p>
<ul class="org-ul">
<li><a href="https://cran.r-project.org/web/packages/dplyr/index.html">cran page</a></li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-org198e3a2" class="outline-2">
<h2 id="org198e3a2"><span class="section-number-2">2</span> Julia</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org7f2745b" class="outline-3">
<h3 id="org7f2745b"><span class="section-number-3">2.1</span> Macros</h3>
<div class="outline-text-3" id="text-2-1">
<p>
Julia macros are hygienic:
</p>

<blockquote>
<p>
First, variables within a macro result are classified as either local or
global. A variable is considered local if it is assigned to (and not declared
global), declared local, or used as a function argument name. Otherwise, it is
considered global.
</p>

<p>
Local variables are then renamed to be unique (using the gensym function, which
generates new symbols), and global variables are resolved within the macro
definition environment.
</p>
</blockquote>

<p>
And you can escape the hygienic by <code>esc</code>, e.g.
</p>

<div class="org-src-container">
<pre class="src src-julia"><span class="org-keyword">macro</span> zerox()
    <span class="org-keyword">return</span> esc(:(x = 0))
<span class="org-keyword">end</span>
</pre>
</div>

<p>
A common pattern:
</p>

<div class="org-src-container">
<pre class="src src-julia"><span class="org-keyword">for</span> op = (<span class="org-julia-quoted-symbol">:sin</span>, <span class="org-julia-quoted-symbol">:cos</span>, <span class="org-julia-quoted-symbol">:tan</span>, <span class="org-julia-quoted-symbol">:log</span>, <span class="org-julia-quoted-symbol">:exp</span>)
    eval(:(Base.$op(a<span class="org-default">::</span><span class="org-type">MyNumber</span>) = MyNumber(<span class="org-constant">$op</span>(a.x))))
<span class="org-keyword">end</span>
</pre>
</div>
</div>
</div>



<div id="outline-container-org2cdc600" class="outline-3">
<h3 id="org2cdc600"><span class="section-number-3">2.2</span> Julia Libraries</h3>
<div class="outline-text-3" id="text-2-2">
</div>
<div id="outline-container-org5dc398b" class="outline-4">
<h4 id="org5dc398b"><span class="section-number-4">2.2.1</span> reference</h4>
<div class="outline-text-4" id="text-2-2-1">
<ul class="org-ul">
<li>juliastats: <a href="https://juliastats.org/">https://juliastats.org/</a></li>
</ul>
</div>
</div>

<div id="outline-container-org445380f" class="outline-4">
<h4 id="org445380f"><span class="section-number-4">2.2.2</span> <a href="https://github.com/kmsquire/Match.jl">kmsquire/Match.jl</a></h4>
</div>
<div id="outline-container-org551ce74" class="outline-4">
<h4 id="org551ce74"><span class="section-number-4">2.2.3</span> <a href="https://github.com/JuliaStats/RDatasets.jl">JuliaStats/RDatasets.jl</a></h4>
<div class="outline-text-4" id="text-2-2-3">
<p>
Interface to the <a href="https://github.com/vincentarelbundock/Rdatasets">vincentarelbundock/Rdatasets</a>
</p>
</div>
</div>

<div id="outline-container-org82298e5" class="outline-4">
<h4 id="org82298e5"><span class="section-number-4">2.2.4</span> ML library</h4>
<div class="outline-text-4" id="text-2-2-4">
</div>
<div id="outline-container-org350de6e" class="outline-5">
<h5 id="org350de6e"><span class="section-number-5">2.2.4.1</span> <a href="https://github.com/cstjean/ScikitLearn.jl">cstjean/ScikitLearn.jl</a></h5>
</div>
<div id="outline-container-org5834634" class="outline-5">
<h5 id="org5834634"><span class="section-number-5">2.2.4.2</span> <a href="https://github.com/mpastell/LIBSVM.jl">mpastell/LIBSVM.jl</a></h5>
<div class="outline-text-5" id="text-2-2-4-2">
<p>
Interface to <a href="https://www.csie.ntu.edu.tw/~cjlin/libsvm/">libsvm</a>
</p>
</div>
</div>
</div>

<div id="outline-container-org5bb7824" class="outline-4">
<h4 id="org5bb7824"><span class="section-number-4">2.2.5</span> Optimizers</h4>
<div class="outline-text-4" id="text-2-2-5">
</div>
<div id="outline-container-orgbd3407d" class="outline-5">
<h5 id="orgbd3407d"><span class="section-number-5">2.2.5.1</span> <a href="https://github.com/JuliaNLSolvers/Optim.jl">Optim.jl</a></h5>
<div class="outline-text-5" id="text-2-2-5-1">
<p>
optimization
</p>
</div>
</div>

<div id="outline-container-org1d332f1" class="outline-5">
<h5 id="org1d332f1"><span class="section-number-5">2.2.5.2</span> <a href="https://github.com/JuliaOpt/JuMP.jl">JuMP.jl</a></h5>
<div class="outline-text-5" id="text-2-2-5-2">
<p>
another optimizer with more solvers
</p>
</div>
</div>
</div>

<div id="outline-container-org71348ca" class="outline-4">
<h4 id="org71348ca"><span class="section-number-4">2.2.6</span> Plots</h4>
<div class="outline-text-4" id="text-2-2-6">
</div>
<div id="outline-container-orgbaeb837" class="outline-5">
<h5 id="orgbaeb837"><span class="section-number-5">2.2.6.1</span> <a href="https://github.com/JuliaPlots/Plots.jl">JuliaPlots/Plots.jl</a></h5>
</div>
<div id="outline-container-orgaa8dea0" class="outline-5">
<h5 id="orgaa8dea0"><span class="section-number-5">2.2.6.2</span> <a href="https://github.com/JuliaPlots/StatsPlots.jl">JuliaPlots/StatsPlots.jl</a></h5>
</div>
<div id="outline-container-org65cea00" class="outline-5">
<h5 id="org65cea00"><span class="section-number-5">2.2.6.3</span> <a href="https://github.com/JuliaPlots/RecipesBase.jl">JuliaPlots/RecipesBase.jl</a></h5>
</div>
</div>

<div id="outline-container-orge8a5a4c" class="outline-4">
<h4 id="orge8a5a4c"><span class="section-number-4">2.2.7</span> Datasets</h4>
<div class="outline-text-4" id="text-2-2-7">
</div>
<div id="outline-container-orgadacc4d" class="outline-5">
<h5 id="orgadacc4d"><span class="section-number-5">2.2.7.1</span> <a href="https://github.com/JuliaLang/METADATA.jl">METADATA.jl</a></h5>
<div class="outline-text-5" id="text-2-2-7-1">
<p>
Used for <a href="https://pkg.julialang.org/docs/">official package registry</a>
</p>
</div>
</div>

<div id="outline-container-org8446e3e" class="outline-5">
<h5 id="org8446e3e"><span class="section-number-5">2.2.7.2</span> <a href="https://github.com/FluxML/Metalhead.jl">Metalhead.jl</a></h5>
<div class="outline-text-5" id="text-2-2-7-2">
<p>
Some vision models and dataset
</p>
</div>
</div>

<div id="outline-container-org7a8dd3a" class="outline-5">
<h5 id="org7a8dd3a"><span class="section-number-5">2.2.7.3</span> <a href="https://github.com/JuliaData/DataFrames.jl">DataFrames.jl</a></h5>
</div>
</div>

<div id="outline-container-org38cca3e" class="outline-4">
<h4 id="org38cca3e"><span class="section-number-4">2.2.8</span> Graph</h4>
<div class="outline-text-4" id="text-2-2-8">
</div>
<div id="outline-container-orga72a182" class="outline-5">
<h5 id="orga72a182"><span class="section-number-5">2.2.8.1</span> <a href="https://github.com/JuliaGraphs/LightGraphs.jl">LightGraphs.jl</a></h5>
<div class="outline-text-5" id="text-2-2-8-1">
<p>
A great package for
</p>
<ul class="org-ul">
<li>just the graph</li>
<li>generate different random graphs</li>
<li>traversal</li>
<li>plotting</li>
<li>algorithms:
<ul class="org-ul">
<li>shortest path</li>
<li>minimum spanning tree</li>
</ul></li>
<li>distance metrics</li>
</ul>
</div>
</div>
<div id="outline-container-org75834b9" class="outline-5">
<h5 id="org75834b9"><span class="section-number-5">2.2.8.2</span> <a href="https://github.com/JuliaGraphs/MetaGraphs.jl">MetaGraphs.jl</a></h5>
<div class="outline-text-5" id="text-2-2-8-2">
<p>
LightGraphs with arbitrary data on nodes.
</p>
</div>
</div>

<div id="outline-container-org86a2227" class="outline-5">
<h5 id="org86a2227"><span class="section-number-5">2.2.8.3</span> <a href="https://github.com/GiovineItalia/Compose.jl">Compose.jl</a></h5>
<div class="outline-text-5" id="text-2-2-8-3">
<p>
The racket/pict for Julia.
</p>
</div>
</div>

<div id="outline-container-org95c2e23" class="outline-5">
<h5 id="org95c2e23"><span class="section-number-5">2.2.8.4</span> <a href="https://github.com/IainNZ/GraphLayout.jl">GraphLayout.jl</a></h5>
<div class="outline-text-5" id="text-2-2-8-4">
<p>
Alternatives:
</p>
<ul class="org-ul">
<li><a href="https://github.com/Keno/GraphViz.jl">GraphViz.jl</a></li>
<li><a href="https://github.com/sisl/TikzGraphs.jl">TikzGraphs.jl</a></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgd0fb6fc" class="outline-4">
<h4 id="orgd0fb6fc"><span class="section-number-4">2.2.9</span> Images</h4>
<div class="outline-text-4" id="text-2-2-9">
</div>
<div id="outline-container-org3292eea" class="outline-5">
<h5 id="org3292eea"><span class="section-number-5">2.2.9.1</span> <a href="https://github.com/JuliaGraphics/ColorTypes.jl">ColorTypes.jl</a></h5>
</div>

<div id="outline-container-org738d52e" class="outline-5">
<h5 id="org738d52e"><span class="section-number-5">2.2.9.2</span> <a href="https://github.com/JuliaImages/ImageFiltering.jl">ImageFiltering.jl</a></h5>
</div>

<div id="outline-container-org7db2267" class="outline-5">
<h5 id="org7db2267"><span class="section-number-5">2.2.9.3</span> <a href="https://github.com/JuliaImages/Images.jl">Images.jl</a></h5>
<div class="outline-text-5" id="text-2-2-9-3">
<p>
colorview, channelview, RGB
</p>
</div>
</div>
</div>

<div id="outline-container-org902b3c8" class="outline-4">
<h4 id="org902b3c8"><span class="section-number-4">2.2.10</span> Compiler tools</h4>
<div class="outline-text-4" id="text-2-2-10">
</div>
<div id="outline-container-org6dae93f" class="outline-5">
<h5 id="org6dae93f"><span class="section-number-5">2.2.10.1</span> <a href="https://github.com/MikeInnes/MacroTools.jl">MacroTools.jl</a></h5>
</div>

<div id="outline-container-orgfee447c" class="outline-5">
<h5 id="orgfee447c"><span class="section-number-5">2.2.10.2</span> <a href="https://github.com/JuliaLang/PackageCompiler.jl">PackageCompiler.jl</a></h5>
<div class="outline-text-5" id="text-2-2-10-2">
<p>
To remove JIT compile overhead
</p>
</div>
</div>
</div>

<div id="outline-container-org65717d5" class="outline-4">
<h4 id="org65717d5"><span class="section-number-4">2.2.11</span> Probablistic packages</h4>
<div class="outline-text-4" id="text-2-2-11">
</div>
<div id="outline-container-orgbfebdd0" class="outline-5">
<h5 id="orgbfebdd0"><span class="section-number-5">2.2.11.1</span> <a href="https://github.com/JuliaStats/Distributions.jl">Distributions.jl</a></h5>
</div>
<div id="outline-container-orgd0568bd" class="outline-5">
<h5 id="orgd0568bd"><span class="section-number-5">2.2.11.2</span> <a href="https://github.com/JuliaStats/GLM.jl">GLM.jl</a> (!!!)</h5>
</div>
</div>
</div>

<div id="outline-container-org5e18f5a" class="outline-3">
<h3 id="org5e18f5a"><span class="section-number-3">2.3</span> Using Pkg</h3>
<div class="outline-text-3" id="text-2-3">
<div class="org-src-container">
<pre class="src src-julia"><span class="org-keyword">using</span> Pkg
Pkg.add(PackageSpec(url=<span class="org-string">"https://github.com/lihebi/julia-repl"</span>, rev=<span class="org-string">"master"</span>))
</pre>
</div>

<p>
To develop a project:
</p>

<div class="org-src-container">
<pre class="src src-julia">Pkg.develop(PackageSpec(url=<span class="org-string">"https://github.com/lihebi/julia-repl"</span>))
</pre>
</div>

<p>
Then view the current pkg status:
</p>

<div class="org-src-container">
<pre class="src src-julia">Pkg.status()
</pre>
</div>

<p>
You will see:
</p>

<div class="org-src-container">
<pre class="src src-julia">EmacsREPL v0.1.0 [<span class="org-string">`~/.julia/dev/EmacsREPL`</span>]
</pre>
</div>
</div>
</div>

<div id="outline-container-org1e8a2eb" class="outline-3">
<h3 id="org1e8a2eb"><span class="section-number-3">2.4</span> Useful functions</h3>
<div class="outline-text-3" id="text-2-4">
<ul class="org-ul">
<li><code>sortperm(v)</code>: Return a permutation vector I that puts v[I] in sorted order.</li>
<li><code>findfirst(predicate::Function, A)</code>: Return the index or key of the first
element of A for which predicate returns true.</li>
<li><code>mapreduce(f, op, itrs...; [init])</code>: Apply function f to each element(s) in
itrs, and then reduce the result using the binary function op</li>
</ul>

<p>
intuitive ones:
</p>
<ul class="org-ul">
<li>reverse</li>
<li>abs</li>
<li>median</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgb318dd6" class="outline-2">
<h2 id="orgb318dd6"><span class="section-number-2">3</span> Back</h2>
<div class="outline-text-2" id="text-3">
<ul class="org-ul">
<li>For vectors, <code>[]</code> returns the element.</li>
<li>For lists, <code>[]</code> will return the the element inside a list, while <code>[[]]</code> will
return the single element.</li>
<li><code>$</code> can be used for indexing with character.</li>
<li>The empty index <code>[]</code> will returns the entire vector with <i>irrelevant</i>
attributes removed. The only retained ones are the <code>names</code>, <code>dim</code> and
<code>dimnames</code> attributes.</li>
</ul>


<div class="org-src-container">
<pre class="src src-R">dim(z) <span class="org-ess-assignment">&lt;-</span> c(3,5,100)~
z[2,,]
z[,,]
</pre>
</div>
</div>

<div id="outline-container-org7db520f" class="outline-4">
<h4 id="org7db520f"><span class="section-number-4">3.0.1</span> data example</h4>
<div class="outline-text-4" id="text-3-0-1">
<div class="org-src-container">
<pre class="src src-R"><span class="org-comment-delimiter">## </span><span class="org-comment"><span class="org-hebi-red">(HEBI: Command line arguments)</span></span>
args = commandArgs(trailingOnly=<span class="org-ess-constant">TRUE</span>)
csvfile = args[1]
csv = read.csv(csvfile, header=<span class="org-ess-constant">TRUE</span>)

total_test <span class="org-ess-assignment">&lt;-</span> dim(csv)[[1]]
sub = subset(csv, reach_code&gt;=5)
total_reach_poi <span class="org-ess-assignment">&lt;-</span> dim(sub)[[1]]
sub = subset(csv, reach_code==5 &amp; status_code == 1)
total_fail_poi <span class="org-ess-assignment">&lt;-</span> dim(sub)[[1]]

sub <span class="org-ess-assignment">&lt;-</span> sub[1:(length(csv)-2)]
<span class="org-comment-delimiter">## </span><span class="org-comment"><span class="org-hebi-red">(HEBI: calling a function)</span></span>
funcs = TransferFunction(sub);

<span class="org-comment-delimiter">## </span><span class="org-comment"><span class="org-hebi-red">(HEBI: define a function)</span></span>
<span class="org-function-name">Constant</span> <span class="org-ess-assignment">&lt;-</span> <span class="org-ess-keyword">function</span>(data) {
  <span class="org-comment-delimiter">## </span><span class="org-comment"><span class="org-hebi-red">(HEBI: return value as a vector)</span></span>
  ret <span class="org-ess-assignment">&lt;-</span> c()
  i <span class="org-ess-assignment">&lt;-</span> 1
  <span class="org-comment-delimiter">## </span><span class="org-comment"><span class="org-hebi-red">(HEBI: a for loop using the vector as range)</span></span>
  <span class="org-ess-keyword">for</span> (i <span class="org-ess-keyword">in</span> c(1:length(data))) {
    col = data[i];
    <span class="org-comment-delimiter">## </span><span class="org-comment"><span class="org-hebi-red">(HEBI: Get the name of a column)</span></span>
    name = names(col);
    <span class="org-ess-keyword">if</span> (substr(name, 1, 6) == <span class="org-string">"output"</span>) {
      <span class="org-comment-delimiter">## </span><span class="org-comment"><span class="org-hebi-red">(HEBI: remove of NA)</span></span>
      newcol = col[!is.na(col)];
      <span class="org-ess-keyword">if</span> (length(newcol) &gt; 2) {
        value <span class="org-ess-assignment">&lt;-</span> newcol[1]
        <span class="org-comment-delimiter">## </span><span class="org-comment"><span class="org-hebi-red">(HEBI: check the value of the vector is all the same)</span></span>
        <span class="org-ess-keyword">if</span> (length(newcol[newcol != value]) == 0) {
          <span class="org-comment-delimiter">## </span><span class="org-comment"><span class="org-hebi-red">(HEBI: pushing a new value to the return vector)</span></span>
          ret <span class="org-ess-assignment">&lt;-</span> c(ret, paste(<span class="org-string">"name = "</span>,  value))}}}}
  <span class="org-ess-keyword">return</span>(ret)}

</pre>
</div>
</div>
</div>
</div>
</div>
</body>
</html>
